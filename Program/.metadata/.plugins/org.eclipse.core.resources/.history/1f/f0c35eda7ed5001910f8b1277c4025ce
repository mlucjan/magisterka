/*
 * opt3001.h
 *
 *  Created on: 2 wrz 2019
 *      Author: michal
 */

#ifndef SENSORS_OPT3001_H_
#define SENSORS_OPT3001_H_

#include "driverlib.h"

//Register addresses-------------
#define RESULT_REG_ADDRESS 0x00
#define CONFIG_REG_ADDRESS 0x01
#define LOW_LIMIT_REG_ADDRESS 0x02
#define HIGH_LIMIT_REG_ADDRESS 0x03
#define MAN_ID_REG_ADDRESS 0x7e
#define DEV_ID_REG_ADDRESS 0x7f
//-------------------------------
#define REGISTER_READ 0
#define REGISTER_WRITE 1

//Configuration register structure-----------
union congigRegister{
    uint16_t value;
    struct  {
      uint16_t rn : 4; //range number field (R/W)
      uint16_t ct : 1; //conversion time field (R/W)
      uint16_t m : 2; //mode of conversion operation field (R/W)
      uint16_t ovf : 1; //overflow flag field (R)
      uint16_t crf : 1; //conversion ready field (R)
      uint16_t fh : 1; //flag high field (R)
      uint16_t fl : 1; //flag low field (R)
      uint16_t l : 1; //latch field (R/W)
      uint16_t pol : 1; //polarity field (R/W)
      uint16_t me : 1; //mask exponent field (R/W)
      uint16_t fc : 2; //fault count field (R/W)
    };
};
//---------------------------------------------

uint16_t register_read(uint8_t address);
void register_write(uint8_t address, uint_16t data);


#endif /* SENSORS_OPT3001_H_ */
